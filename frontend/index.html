<!DOCTYPE html>
<html lang="es">
<head>
    <!-- ========================================================= -->
    <!-- 1. CONFIGURACIÓN BÁSICA DEL DOCUMENTO                     -->
    <!--    - Codificación, viewport y título                      -->
    <!-- ========================================================= -->

    <!-- [1.1] Configuración de codificación en UTF-8
         - Asegura que tildes, ñ y símbolos de moneda se vean bien. -->
    <meta charset="UTF-8">

    <!-- [1.2] Viewport para PWA responsive en móviles, tablets y desktop
         - width=device-width: ajusta el ancho al del dispositivo.
         - initial-scale=1.0: zoom inicial.
         - maximum-scale=1.0: evita zoom accidental en POS.
         - viewport-fit=cover: usa toda el área útil (notch, etc.). -->
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover"
    >

    <!-- [1.3] Título de la app
         - Aparece en la pestaña del navegador y en algunos contextos PWA. -->
    <title>Finance PWA · Asistente Financiero para Negocios de Comida</title>


    <!-- ========================================================= -->
    <!-- 2. SEO BÁSICO (PORQUE TU APP ES PÚBLICA)                  -->
    <!--    - Descripción, keywords y autor                        -->
    <!-- ========================================================= -->

    <!-- [2.1] Descripción corta de la app
         - Útil para buscadores y cuando se previsualiza en algunos sitios. -->
    <meta
        name="description"
        content="Finance PWA es un asistente financiero avanzado para negocios de comida. Calcula costos reales, ganancias, metas y flujo de caja por producto, venta y periodo de tiempo."
    >

    <!-- [2.2] Palabras clave
         - No es crítico hoy en día, pero ayuda a contextualizar el proyecto. -->
    <meta
        name="keywords"
        content="PWA, finanzas, negocios de comida, restaurante, costos, ganancias, metas, flujo de caja, POS"
    >

    <!-- [2.3] Autor / marca del proyecto -->
    <meta name="author" content="Finance PWA">


    <!-- ========================================================= -->
    <!-- 3. PWA: MANIFEST + CAPACIDAD DE APP                       -->
    <!--    - Hace que el navegador trate tu web como aplicación   -->
    <!-- ========================================================= -->

    <!-- [3.1] Enlace al manifest de la PWA
         - IMPORTANTE: en tu estructura, manifest.json está en /static/manifest.json
         - Flask debe servir correctamente /static/ para que esto funcione. -->
    <link rel="manifest" href="/static/manifest.json">

    <!-- [3.2] mobile-web-app-capable
         - Le indica a navegadores (especialmente Android/Chrome) que puede
           comportarse como una app cuando se “añade a pantalla de inicio”. -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- [3.3] Color principal de la app
         - Barra del navegador en móviles y algunos contextos de sistema. -->
    <meta name="theme-color" content="#111111">


    <!-- ========================================================= -->
    <!-- 4. ICONOS / FAVICONS (BASADO EN TU /static/icons)          -->
    <!--    - Iconos para navegador, PWA y Apple                    -->
    <!-- ========================================================= -->

    <!-- [4.1] Favicon / icono base (navegadores modernos) -->
    <link
        rel="icon"
        type="image/png"
        sizes="192x192"
        href="/static/icons/icon-192.png"
    >

    <!-- [4.2] Icono grande para PWA (Android / desktop) -->
    <link
        rel="icon"
        type="image/png"
        sizes="512x512"
        href="/static/icons/icon-512.png"
    >

    <!-- [4.3] Icono para iOS/iPadOS al añadir a pantalla de inicio -->
    <link
        rel="apple-touch-icon"
        href="/static/icons/icon-192.png"
    >

    <!-- [4.4] Permite modo "web app" en iOS (sin barra de navegador) -->
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!-- [4.5] Título que verá el usuario cuando la app esté instalada en iOS -->
    <meta name="apple-mobile-web-app-title" content="Finance PWA">

    <!-- [4.6] Estilo de barra de estado en iOS (negro translúcido queda bien con tema oscuro) -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">


    <!-- ========================================================= -->
    <!-- 5. METADATOS SOCIALES (OPEN GRAPH + TWITTER)               -->
    <!--    - Para previews bonitas en WhatsApp / X / Facebook      -->
    <!--    - Ajusta dominio e imagen cuando tengas brand final     -->
    <!-- ========================================================= -->

    <!-- [5.1] Open Graph básico -->
    <meta property="og:type" content="website">
    <meta
        property="og:title"
        content="Finance PWA · Asistente Financiero para Negocios de Comida"
    >
    <meta
        property="og:description"
        content="Analiza tu negocio de comida con precisión: costos reales, ventas, metas y flujo de caja en una PWA offline-first."
    >
    <!-- [5.2] URL pública principal de tu app (ajusta a tu dominio real) -->
    <meta property="og:url" content="https://finance.ejemplo.com/">

    <!-- [5.3] Imagen de previsualización
         - Por ahora usamos splash.png como cover; luego puedes cambiarla. -->
    <meta
        property="og:image"
        content="https://finance.ejemplo.com/static/icons/splash.png"
    >

    <!-- [5.4] Twitter Card (X) básica -->
    <meta name="twitter:card" content="summary_large_image">
    <meta
        name="twitter:title"
        content="Finance PWA · Asistente Financiero para Negocios de Comida"
    >
    <meta
        name="twitter:description"
        content="PWA inteligente para dueños de negocios de comida. Calcula costos, ganancias y metas de forma visual y detallada."
    >
    <meta
        name="twitter:image"
        content="https://finance.ejemplo.com/static/icons/splash.png"
    >


    <!-- ========================================================= -->
    <!-- 6. MEJORAS PARA EXPERIENCIA EN MÓVIL                      -->
    <!-- ========================================================= -->

    <!-- [6.1] Evita que el navegador convierta números en links de teléfono -->
    <meta name="format-detection" content="telephone=no">

    <!-- [6.2] (Opcional) Indicar idioma principal de contenido al navegador
         - El atributo lang real va en <html>, esto es solo informativo extra. -->
    <meta http-equiv="Content-Language" content="es">


    <!-- ========================================================= -->
    <!-- 7. HOJAS DE ESTILO (CSS) SEGÚN TU ESTRUCTURA              -->
    <!--    - index.html vive en /frontend                          -->
    <!--    - Por eso las rutas son relativas: css/...              -->
    <!-- ========================================================= -->

    <!-- [7.1] Estilos base: reset, tipografías, utilidades globales -->
    <link rel="stylesheet" href="css/base.css">

    <!-- [7.2] Layout tipo POS: header, sidebar, main, grids -->
    <link rel="stylesheet" href="css/layout.css">

    <!-- [7.3] Estilos para formularios (onboarding, blocks, products, sales, etc.) -->
    <link rel="stylesheet" href="css/forms.css">

    <!-- [7.4] Estilos específicos para contenedores de gráficos, tarjetas de analytics -->
    <link rel="stylesheet" href="css/charts.css">

    <!-- [7.5] Tema oscuro por defecto (luego puedes alternar tema con JS) -->
    <link rel="stylesheet" href="css/theme-dark.css">


    <!-- ========================================================= -->
    <!-- 8. PISTAS DE PERFORMANCE (OPCIONALES, PREPARADAS)          -->
    <!--    - Puedes descomentar cuando las necesites               -->
    <!-- ========================================================= -->

    <!-- [8.1] (Opcional futuro) Preconexión a servidor de API propio
         - Útil si más adelante expones un subdominio tipo api.finance.ejemplo.com
         - De momento lo dejo comentado para que no moleste.

    <link rel="preconnect" href="https://api.finance.ejemplo.com" crossorigin>
    -->

    <!-- [8.2] (Opcional futuro) Preconexión a Google Fonts u otro CDN
         - Solo si realmente usas fuentes externas.
         
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    -->


    <!-- ========================================================= -->
    <!-- 9. SCRIPT PRINCIPAL DEL FRONTEND (ENTRYPOINT JS)           -->
    <!--    - SOLO cargamos main.js aquí                            -->
    <!--    - main.js importará el resto de módulos JS              -->
    <!-- ========================================================= -->

    <!-- [9.1] Script de entrada de la PWA
         - type="module" permite usar imports ES6.
         - Ruta relativa: index.html está en /frontend → js/main.js en /frontend/js/main.js
         - main.js será responsable de:
             * registrar el Service Worker (static/sw.js),
             * inicializar Socket.IO (cuando lo conectes),
             * llamar a initApp() de index.js,
             * inicializar router, state, syncEngine, etc. -->
    <script type="module" src="js/main.js"></script>

</head>
<body data-theme="dark" data-connection="online" data-sync-state="idle">
    <!-- ========================================================= -->
    <!--  APP SHELL PRINCIPAL (NÚCLEO FIJO DE LA PWA)             -->
    <!--  Hasta aquí ya definimos:                                -->
    <!--    ✔ header (zona superior)                              -->
    <!--    ✔ sidebar (menú POS lateral)                          -->
    <!--    ✔ main (contenedor central vacío aún)                 -->
    <!-- ========================================================= -->

    <!-- (1) HEADER YA CREADO -->
    <header id="app-header">
        <div id="header-content">
            <div id="header-left">
                <span id="app-logo-text">Finance PWA</span>
            </div>

            <div id="header-center">
                <span id="business-name-display">Negocio no configurado</span>
            </div>

            <div id="header-right">
                <span id="connection-status-label">Estado: desconocido</span>
                <button id="header-settings-button" type="button">⚙</button>
            </div>
        </div>
    </header>

    <!-- (2) SIDEBAR YA CREADO -->
    <aside id="sidebar">
        <nav id="sidebar-nav">
            <span id="sidebar-placeholder">Menú principal</span>
        </nav>
    </aside>

    <!-- (3) MAIN YA CREADO (sin vistas aún) -->
    <main id="main-view">
        <div id="main-placeholder">
            <p>Área principal de la app (main-view). Aquí se mostrarán los módulos.</p>
        </div>
    </main>


    <!-- ========================================================= -->
    <!-- 4. LAYER DE SENSORES Y UTILIDADES GLOBALES (base técnica) -->
    <!-- ========================================================= -->
    <!--
        Esta sección es totalmente opcional para apps normales,
        pero tu PWA avanzada la NECESITA para:

        - Detectar cambios de conexión (online/offline)
        - Detectar si la pantalla cambia tamaño (rotación, POS tablet)
        - Detectar si el usuario cambia de pestaña o minimiza la app
        - Capturar interacciones técnicas (telemetría, analíticas)
        - Detectar si la PWA está instalada o abierta en modo standalone
        - Registrar eventos globales que sirven para Behavior Tracking
          (ventas lentas, tiempos muertos, rutina del negocio)
    -->

    <!-- 4.1 SENSOR DE ESTADO DE INTERNET -->
    <div id="network-sensor" hidden>
        <!--
            Este elemento NO se muestra al usuario.
            Es un “nodo técnico” para que JS pueda:
            - escuchar eventos globales de conexión,
            - registrar cuándo el dispositivo pierde o recupera internet,
            - y comunicarlo al syncEngine.js.

            JS puede actualizar attributes como:
            data-online="true"
            data-online="false"
        -->
    </div>

    <!-- 4.2 SENSOR DE VISIBILIDAD (APP ACTIVA / INACTIVA) -->
    <div id="visibility-sensor" hidden>
        <!--
            Este sensor permitirá saber:
            - si el usuario cambió de pestaña,
            - si salió de la app,
            - cuánto tiempo estuvo inactivo,
            - si es necesario disparar un auto-save local,
            - si se debe pausar sincronización.

            Usa Page Visibility API (document.hidden en JS)
        -->
    </div>

    <!-- 4.3 SENSOR DE TAMAÑO DE PANTALLA -->
    <div id="viewport-sensor" hidden>
        <!--
            Detectar:
            - Rotación (portrait/landscape)
            - Tamaño real del POS
            - Densidad de píxeles para gráficos y layouts
            - Cambios de resolución dinámica

            JS podrá leer width/height y actualizar CSS variables.
        -->
    </div>


    <!-- 4.4 SENSOR DE DISPOSITIVO (IDENTIFICACIÓN) -->
    <div id="device-sensor" hidden>
        <!--
            Aquí JS puede depositar:
            - fingerprint del dispositivo,
            - tipo de dispositivo (phone/tablet/desktop),
            - info básica del navegador,
            - si es app instalada o web normal,
            - si está corriendo en iPhone/Android.

            Esto se usa después para:
            - UX adaptativa,
            - optimización,
            - decisiones de layout,
            - sesiones específicas por dispositivo.
        -->
    </div>


    <!-- ========================================================= -->
    <!-- 5. ÁREA PARA EXTENSIONES FUTURAS (AÚN VACÍAS)             -->
    <!-- ========================================================= -->
    <!--
        NO colocamos nada aquí todavía porque tú lo pediste.

        Pero este espacio será donde vamos a montar:
        - contenedor de modales
        - contenedor de notificaciones tipo toast
        - overlays (loading, offline)
        - banners informativos
        - paneles flotantes
        - UI avanzada opcional

        Por eso NO CERRAMOS EL BODY.
    -->

        <!-- ========================================================= -->
    <!-- 3. MAIN VIEW (TODAS LAS VISTAS / MÓDULOS INTERNOS)        -->
    <!-- ========================================================= -->
    <main id="main-view">
        <!--
            [ROL DEL MAIN]
            --------------------------------------------------------
            - Contenedor principal de TODAS las vistas de la app.
            - Cada módulo tiene su propio <section> con:
                * un id único (ej: onboarding-view)
                * la clase común "app-view" para facilitar estilos
                * atributo data-view para ayudar al router.js
            - router.js:
                * mostrará SOLO UNA vista a la vez, añadiendo/removiendo
                  clases como "is-active" o "is-hidden".
            - ui_*.js:
                * cada archivo se encarga de su propia sección.
        -->


        <!-- ===================================================== -->
        <!-- 3.1 ONBOARDING VIEW                                   -->
        <!--     - Explica cómo funciona la app                    -->
        <!--     - Pide datos básicos del negocio                  -->
        <!-- ===================================================== -->
        <section
            id="onboarding-view"
            class="app-view"
            data-view="onboarding"
        >
            <!--
                [PROPÓSITO]
                - Guiar al usuario la primera vez que entra.
                - Explicar filosofía de la app (setup pesado → uso fácil).
                - Recoger:
                    * nombre del negocio
                    * ciudad
                    * moneda
                    * horario general (más adelante)
            -->

            <!-- Encabezado de la vista -->
            <header class="view-header">
                <h1 class="view-title">Bienvenido a Finance PWA</h1>
                <p class="view-subtitle">
                    Configura lo básico de tu negocio para que los cálculos sean precisos.
                </p>
            </header>

            <!-- Contenido principal de onboarding -->
            <div class="view-content" id="onboarding-content">
                <!--
                    ui_onboarding.js será responsable de:
                    - Renderizar un formulario paso a paso (wizard).
                    - Guardar datos en:
                        * settingsStore.js (frontend)
                        * /api/onboarding (backend) cuando haya conexión.
                    - Marcar en state.js que el onboarding fue completado.

                    Aquí puedes imaginar:
                    - Paso 1: Datos del negocio.
                    - Paso 2: Horarios y jornadas.
                    - Paso 3: Metas iniciales (opcional).
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.2 BLOCKS VIEW                                       -->
        <!--     - Ingredientes, insumos, servicios, mano de obra  -->
        <!-- ===================================================== -->
        <section
            id="blocks-view"
            class="app-view"
            data-view="blocks"
        >
            <!-- Encabezado de la vista -->
            <header class="view-header">
                <h1 class="view-title">Blocks del negocio</h1>
                <p class="view-subtitle">
                    Registra ingredientes, insumos, servicios y mano de obra con su costo real.
                </p>
            </header>

            <!-- Barra de herramientas (filtros, búsqueda, acciones) -->
            <div class="view-toolbar" id="blocks-toolbar">
                <!--
                    ui_blocks.js podrá insertar aquí:
                    - Barra de búsqueda.
                    - Filtros por tipo (ingrediente/insumo/servicio/labor).
                    - Botón "Nuevo block".
                -->
            </div>

            <!-- Contenido principal de Blocks -->
            <div class="view-content" id="blocks-content">
                <!--
                    ui_blocks.js:
                    - Mostrará una tabla o tarjetas con los blocks registrados.
                    - Permitirá editar:
                        * nombre
                        * precio de paquete
                        * cantidad total
                        * unidad (g, kg, ml, unidad, hora, etc.)
                        * tipo
                        * si es exacto o aproximado

                    storage:
                    - sqlLocal.js y localDb.js guardarán estos datos localmente.
                    - blocksApi.js sincronizará con el backend cuando haya internet.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.3 PRODUCTS VIEW                                     -->
        <!--     - Recetas inteligentes basadas en blocks          -->
        <!-- ===================================================== -->
        <section
            id="products-view"
            class="app-view"
            data-view="products"
        >
            <header class="view-header">
                <h1 class="view-title">Productos / Recetas</h1>
                <p class="view-subtitle">
                    Crea tus productos usando blocks y calcula su costo real y margen.
                </p>
            </header>

            <div class="view-toolbar" id="products-toolbar">
                <!--
                    ui_products.js podrá añadir:
                    - Botón "Nuevo producto".
                    - Selector de categoría (hamburguesas, bebidas, etc.).
                    - Búsqueda por nombre.
                -->
            </div>

            <div class="view-content" id="products-content">
                <!--
                    ui_products.js:
                    - Mostrará lista de productos (ej. Hamburguesa Clásica).
                    - Cada producto:
                        * lista de blocks asociados
                        * modo básico vs profesional
                        * tiempo de preparación
                        * precio de venta

                    calc_costs.js (backend y/o frontend):
                    - Tomará blocks + cantidades para:
                        * costo unitario real
                        * precio mínimo sugerido
                        * precio justo
                        * margen en dinero y porcentaje.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.4 SALES VIEW                                        -->
        <!--     - Flujo rápido de ventas diarias                  -->
        <!-- ===================================================== -->
        <section
            id="sales-view"
            class="app-view"
            data-view="sales"
        >
            <header class="view-header">
                <h1 class="view-title">Ventas rápidas</h1>
                <p class="view-subtitle">
                    Registra ventas en pocos toques usando tus productos configurados.
                </p>
            </header>

            <div class="view-toolbar" id="sales-toolbar">
                <!--
                    ui_sales.js podrá añadir:
                    - Selector rápido de fecha/hora (por defecto ahora).
                    - Filtros de método de pago.
                    - Atajos de venta (ej. productos favoritos).
                -->
            </div>

            <div class="view-content" id="sales-content">
                <!--
                    ui_sales.js:
                    - Mostrará un panel tipo POS:
                        * listado de productos
                        * cantidades
                        * carrito
                        * total
                    - Al confirmar, registrará:
                        * venta con timestamp
                        * productos vendidos
                        * método de pago

                    analytics_engine.py:
                    - Con estos datos podrá calcular:
                        * qué productos mueven más dinero
                        * qué márgenes son mejores
                        * patrones por hora / día.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.5 GOALS / CASHFLOW VIEW                             -->
        <!--     - Metas financieras y flujo de caja               -->
        <!-- ===================================================== -->
        <section
            id="goals-view"
            class="app-view"
            data-view="goals"
        >
            <header class="view-header">
                <h1 class="view-title">Metas y flujo de caja</h1>
                <p class="view-subtitle">
                    Define tus metas diarias, semanales y mensuales, y ve cuánto te falta.
                </p>
            </header>

            <div class="view-toolbar" id="goals-toolbar">
                <!--
                    ui_goals.js:
                    - Podrá añadir:
                        * selector del periodo (día, semana, quincena, mes, año).
                        * acceso rápido a configuración de metas.
                -->
            </div>

            <div class="view-content" id="goals-content">
                <!--
                    calc_goals.py:
                    - Recibirá:
                        * metas por periodo
                        * ventas reales
                        * egresos reales
                    - Devolverá:
                        * cuánto llevas
                        * cuánto falta
                        * % completado
                        * cuántos productos faltaría vender (por tipo).

                    ui_goals.js:
                    - Mostrará estos datos en forma de:
                        * barras de progreso
                        * tarjetas de resumen
                        * tablas con metas vs realidad.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.6 ANALYTICS VIEW                                    -->
        <!--     - Dashboard financiero inteligente                -->
        <!-- ===================================================== -->
        <section
            id="analytics-view"
            class="app-view"
            data-view="analytics"
        >
            <header class="view-header">
                <h1 class="view-title">Analytics</h1>
                <p class="view-subtitle">
                    Visualiza tus productos más rentables, gastos más altos y evolución de tus metas.
                </p>
            </header>

            <div class="view-toolbar" id="analytics-toolbar">
                <!--
                    ui_analytics.js:
                    - Podrá añadir:
                        * selector de rango de tiempo.
                        * filtros (producto, categoría, método de pago).
                -->
            </div>

            <div class="view-content" id="analytics-content">
                <!--
                    Aquí se montarán los gráficos:
                    - charts_pie.js
                    - charts_bar.js
                    - charts_line.js
                    - charts_velocity.js
                    - charts_gauge.js

                    analytics_engine.py:
                    - Generará métricas clave (KPI):
                        * rentabilidad por producto
                        * top gastos
                        * eficiencia del modelo de cocina
                        * cumplimiento acumulado de metas.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.7 RECEIPTS VIEW                                     -->
        <!--     - Recibos simples por venta                       -->
        <!-- ===================================================== -->
        <section
            id="receipts-view"
            class="app-view"
            data-view="receipts"
        >
            <header class="view-header">
                <h1 class="view-title">Recibos</h1>
                <p class="view-subtitle">
                    Consulta, copia o exporta recibos de ventas para tus clientes.
                </p>
            </header>

            <div class="view-toolbar" id="receipts-toolbar">
                <!--
                    ui_receipts.js:
                    - Podrá añadir:
                        * filtros por fecha.
                        * búsqueda por número de recibo.
                -->
            </div>

            <div class="view-content" id="receipts-content">
                <!--
                    ui_receipts.js:
                    - Listará los recibos generados desde el módulo de ventas.
                    - Permitirá:
                        * copiar texto del recibo.
                        * generar imagen (si implementas).
                        * reenviar por WhatsApp/SMS/email.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.8 SETTINGS VIEW                                     -->
        <!--     - Ajustes generales de la app                     -->
        <!-- ===================================================== -->
        <section
            id="settings-view"
            class="app-view"
            data-view="settings"
        >
            <header class="view-header">
                <h1 class="view-title">Configuración</h1>
                <p class="view-subtitle">
                    Ajusta moneda, idioma, formato de números y tema visual.
                </p>
            </header>

            <div class="view-content" id="settings-content">
                <!--
                    ui_settings.js:
                    - Mostrará opciones para:
                        * moneda principal
                        * idioma de la interfaz
                        * formato (separador de miles, decimales)
                        * tema oscuro/claro

                    settingsStore.js:
                    - Guardará estas preferencias en almacenamiento local.
                    - Sincronizará con el backend si decides hacerlo.
                -->
            </div>
        </section>


        <!-- ===================================================== -->
        <!-- 3.9 ACTIVITY VIEW                                     -->
        <!--     - Logs de actividad y tracking                     -->
        <!-- ===================================================== -->
        <section
            id="activity-view"
            class="app-view"
            data-view="activity"
        >
            <header class="view-header">
                <h1 class="view-title">Actividad</h1>
                <p class="view-subtitle">
                    Revisa acciones recientes: ventas, cambios de configuración y uso de módulos.
                </p>
            </header>

            <div class="view-content" id="activity-content">
                <!--
                    ui_activity.js:
                    - Mostrará un feed o tabla con:
                        * "Se creó un nuevo block"
                        * "Se registró una venta de X"
                        * "Se actualizó una meta"
                        * "Se cambió la configuración de moneda"

                    activityApi.js / activity_repo.py:
                    - Guardarán estos logs en backend y/o local.
                    - Útil para auditoría y entender hábitos del usuario.
                -->
            </div>
        </section>

    </main>
        <!-- ========================================================= -->
    <!-- 4. CONTENEDOR GLOBAL DE MODALES (VENTANAS EMERGENTES)     -->
    <!-- ========================================================= -->
    <!--
        [ROL GENERAL]
        --------------------------------------------------------
        - Este bloque es el ÚNICO lugar donde se mostrarán todos
          los modales de la app (confirmaciones, formularios, detalles).
        - NO se crean modales repartidos por toda la página.
        - JavaScript (ui_*.js + helpers centralizados) se encargará
          de:
            * insertar contenido dentro de este contenedor,
            * mostrar/ocultar el overlay,
            * manejar cierre, ESC, clic fuera, etc.

        [VENTAJAS DE ESTE ENFOQUE]
        --------------------------------------------------------
        - Control centralizado de:
            * estilos de fondo (blur, oscuro, transparente),
            * animaciones de apertura/cierre,
            * comportamiento de scroll (bloquear fondo),
            * accesibilidad (focus dentro del modal).
        - Fácil de depurar, fácil de loggear, fácil de extender.

        [CONEXIONES FUTURAS]
        --------------------------------------------------------
        - ui_* (por ejemplo ui_sales.js, ui_blocks.js):
            * Llamarán a un helper global tipo:
                showModal({ title, body, actions })
                closeModal(id)
            * Ese helper manipulará este contenedor.
        - events.js:
            * Manejará:
                - clic en "x" de cerrar,
                - teclas ESC,
                - clic en overlay si quieres cierre al hacer click fuera.
        - telemetry.js:
            * Podrá registrar qué modales se abren más,
              cuánto tarda la gente en responder, etc.
    -->
    <div
        id="modal-container"
        aria-live="polite"
        aria-label="Contenedor de ventanas emergentes"
    >
        <!--
            [ESTADO INICIAL]
            ----------------------------------------------------
            - En estado base (sin ningún modal abierto), este
              contenedor estará vacío y, por CSS, completamente
              invisible (display: none, o visibility: hidden).
            - Cuando un helper JS abra un modal:
                * se insertará el HTML del modal dentro de
                  #modal-root,
                * se mostrará el overlay,
                * se bloqueará el scroll del body si así lo decides.
        -->

        <!-- ================================================= -->
        <!-- 4.1 OVERLAY GLOBAL DE MODALES                     -->
        <!-- ================================================= -->
        <div
            id="modal-overlay"
            class="modal-overlay"
            hidden
        >
            <!--
                [ROL DEL OVERLAY]
                ------------------------------------------------
                - Capa semi-transparente que oscurece el fondo.
                - Hace que el usuario se concentre en el modal.
                - Puede capturar clics para:
                    * cerrar el modal al hacer click fuera,
                      si así lo decides en tu UX.
                - CSS típico:
                    * posición fija,
                    * ocupa toda la pantalla,
                    * fondo rgba(0,0,0,0.4) o similar.

                [CONEXIONES]
                ------------------------------------------------
                - events.js:
                    * Suscribirá un listener de click a este
                      overlay para cerrar el modal activo
                      si esa política está activa.
                - state.js:
                    * Puede guardar si hay modal abierto,
                      ej. appState.modal.isOpen = true/false.
            -->
        </div>

        <!-- ================================================= -->
        <!-- 4.2 RAÍZ DE MODALES (DÓNDE SE INSERTAN LAS VISTAS) -->
        <!-- ================================================= -->
        <div
            id="modal-root"
            class="modal-root"
            aria-hidden="true"
        >
            <!--
                [ROL DE modal-root]
                ------------------------------------------------
                - Es el nodo padre donde JavaScript inyectará
                  uno o varios modales activos.
                - Puede soportar:
                    * un solo modal a la vez,
                    * o pila de modales (diálogo encima de otro).
                - Por defecto está vacío.
                - CSS:
                    * típico layout centrado:
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        posición fija (top/left 0, width/height 100%).

                [COMPORTAMIENTO ESPERADO]
                ------------------------------------------------
                - Cuando no hay modales:
                    * modal-root debe estar vacío,
                    * y/o tomando un estado oculto.
                - Cuando se abre un modal:
                    * JS inserta un <article> o <div class="modal">
                      con estructura estándar.
            -->


            <!-- ================================================= -->
            <!-- 4.3 PLANTILLA DE MODAL ESTÁNDAR (EJEMPLO V0)      -->
            <!-- ================================================= -->
            <!--
                IMPORTANTE:
                - Esta estructura sirve como REFERENCIA de cómo
                  debe verse un modal típico.
                - Puede estar:
                    * comentada (solo como guía),
                    * o dejarse como ejemplo que JS reemplace.
                - Tú decides si la dejas visible o la usas como
                  comentario de referencia en desarrollo.

                RECOMENDACIÓN:
                - Déjala aquí por ahora como comentario y más
                  adelante, cuando programes el helper de modales,
                  la moveremos al JS o la clonaremos desde aquí.
            -->
            <!--
            <article
                class="modal"
                role="dialog"
                aria-modal="true"
                aria-labelledby="modal-title-example"
                aria-describedby="modal-body-example"
                data-modal-id="example"
            >
                <header class="modal-header">
                    <h2 id="modal-title-example" class="modal-title">
                        Título del modal
                    </h2>
                    <button
                        type="button"
                        class="modal-close-button"
                        data-modal-action="close"
                        aria-label="Cerrar"
                    >
                        ✕
                    </button>
                </header>

                <section
                    id="modal-body-example"
                    class="modal-body"
                >
                    <p>
                        Aquí va el contenido principal de la
                        ventana emergente: texto, formularios,
                        detalles de venta, etc.
                    </p>
                </section>

                <footer class="modal-footer">
                    <button
                        type="button"
                        class="modal-button secondary"
                        data-modal-action="cancel"
                    >
                        Cancelar
                    </button>

                    <button
                        type="button"
                        class="modal-button primary"
                        data-modal-action="confirm"
                    >
                        Confirmar
                    </button>
                </footer>
            </article>
            -->
            <!--
                [NOTAS SOBRE ESTA PLANTILLA]
                ------------------------------------------------
                - role="dialog" y aria-modal="true":
                    * Mejoran accesibilidad para lectores de pantalla.
                - aria-labelledby / aria-describedby:
                    * Indican qué elementos contienen el título
                      y la descripción del modal.
                - data-modal-id:
                    * Te permite identificar este modal en JS
                      para manejo en pila o tracking.
                - data-modal-action:
                    * Use this to wire generic listeners:
                        - "close"
                        - "cancel"
                        - "confirm"
                      sin tener que atar eventos a IDs específicos.
            -->
        </div>
    </div>
        <!-- ========================================================= -->
    <!-- 5. CONTENEDOR GLOBAL DE TOASTS (NOTIFICACIONES RÁPIDAS)   -->
    <!-- ========================================================= -->
    <!--
        [ROL GENERAL]
        --------------------------------------------------------
        - Este bloque es el ÚNICO lugar donde se van a renderizar
          todas las notificaciones rápidas de la app (toasts).
        - Un "toast" es un mensaje corto que:
            * aparece unos segundos,
            * no bloquea la interfaz,
            * informa algo importante y desaparece solo.

        EJEMPLOS DE TOASTS EN TU APP:
        --------------------------------------------------------
        - "Venta registrada correctamente."
        - "Venta guardada localmente (offline)."
        - "Error al conectar con el servidor. Reintentando..."
        - "Sin conexión. Trabajando en modo offline."
        - "Sincronización completada con éxito."
        - "Metas actualizadas."

        [RAZÓN DE TENER UN SOLO CONTENEDOR]
        --------------------------------------------------------
        - Evita tener <div> de notificaciones repartidas por todo
          el DOM.
        - Facilita:
            * estilos globales,
            * animaciones de entrada/salida,
            * orden de las notificaciones,
            * logging y depuración.
        - Telemetry.js y activity logs pueden registrar fácilmente
          qué mensajes se muestran y cuándo.
    -->
    <div
        id="toast-container"
        class="toast-container"
        aria-live="assertive"
        aria-atomic="false"
    >
        <!--
            [ACCESIBILIDAD]
            ----------------------------------------------------
            - aria-live="assertive":
                * Le indica a los lectores de pantalla que estos
                  mensajes son importantes y deben ser anunciados.
            - aria-atomic="false":
                * Permite que se anuncien toasts conforme aparecen
                  sin necesidad de considerar todo el contenedor
                  como una unidad indivisible.

            [ESTADO INICIAL]
            ----------------------------------------------------
            - Por defecto, el contenedor está vacío.
            - CSS se encargará de:
                * posicionarlo (por ejemplo, esquina inferior derecha),
                * aplicar z-index para que aparezca encima de la UI.
        -->

        <!-- ================================================= -->
        <!-- 5.1 PLANTILLA DE UN TOAST ESTÁNDAR (EJEMPLO V0)   -->
        <!-- ================================================= -->
        <!--
            Esta sección es una PLANTILLA de referencia para
            que sepas cómo debe lucir un toast típico.

            - Lo recomendable:
                * Tener esta estructura como comentario o ejemplo
                  y que luego JavaScript genere toasts clonando
                  esta forma (o construyendo el HTML equivalente).

            - Cada toast se renderizará como un elemento hijo de
              #toast-container, por ejemplo:
                <div class="toast toast--success">...</div>

            TIP (para más adelante en JS):
            ----------------------------------------------------
            - Crea un helper global tipo:
                showToast(message, { type: "success" | "error" | "info" | "warning", durationMs })
            - Ese helper:
                * construye el <div> con las clases apropiadas,
                * lo inserta en #toast-container,
                * inicia un timer para eliminarlo después de X ms,
                * opcionalmente permite cierre manual.

            A continuación va un ejemplo comentado:
        -->
        <!--
        <div
            class="toast toast--success"
            role="status"
            data-toast-id="example-success"
        >
            <div class="toast-content">
                <span class="toast-icon">✔</span>
                <div class="toast-text">
                    <p class="toast-title">Venta registrada</p>
                    <p class="toast-message">
                        La venta se guardó correctamente y será incluida en tus análisis.
                    </p>
                </div>
            </div>

            <button
                type="button"
                class="toast-close-button"
                aria-label="Cerrar notificación"
                data-toast-action="close"
            >
                ✕
            </button>
        </div>
        -->

        <!--
            [DETALLE DE LA PLANTILLA]
            ----------------------------------------------------
            - class="toast":
                * Clase base para todos los toasts (estilos comunes).

            - class="toast--success" / "toast--error" / "toast--info" / "toast--warning":
                * Modificadores visuales según el tipo de mensaje:
                    success (verde), error (rojo), info (azul), warning (amarillo)
                * Esto lo manejarás desde CSS.

            - role="status":
                * Indica que se trata de un mensaje de estado
                  importante para el usuario.

            - data-toast-id:
                * Permite referenciar este toast concreto en JS
                  si quieres hacer cosas como:
                    - eliminarlo antes del timeout,
                    - sincronizar logs,
                    - marcarlo como "ya leído".

            - .toast-content:
                * Contiene icono + texto del toast.
            - .toast-icon:
                * Puedes poner emojis, SVG o iconos de fuente aquí.
            - .toast-text:
                * Agrupa título + mensaje.
            - .toast-title:
                * Mensaje corto tipo "Venta registrada".
            - .toast-message:
                * Detalle adicional opcional.

            - .toast-close-button:
                * Botón para cerrar el toast manualmente antes de que
                  se consuma el tiempo de vida automático.
                * data-toast-action="close":
                    - Puedes enganchar un listener genérico en JS:
                        if (event.target.dataset.toastAction === "close") { ... }
        -->

        <!--
            [COMPORTAMIENTO ESPERADO FUTURO]
            ----------------------------------------------------
            - Cuando se muestre una notificación:
                * JS creará un nuevo <div class="toast ..."> dentro
                  de #toast-container.
                * Se aplicará una animación de entrada (fade/slide).
                * Después de X segundos:
                    * se dispara animación de salida,
                    * y se elimina el nodo del DOM.

            - Cuando haya múltiples toasts:
                * se apilarán verticalmente (arriba/abajo según diseño)
                  usando flex-direction: column en .toast-container.

            - Telemetría:
                * Cada vez que se muestra un toast, telemetry.js
                  puede registrar evento:
                    - tipo de toast (success/error/info/warning),
                    - origen (módulo: sales, goals, blocks, etc.),
                    - timestamp.

            - Offline / Sync:
                * syncEngine.js puede disparar toasts según estado de
                  sincronización:
                    - "Sin conexión. Operando en modo offline."
                    - "Sincronización completada."
                    - "Error al sincronizar. Reintentando en 30s."
        -->
    </div>
        <!-- ========================================================= -->
    <!-- 6. OVERLAYS Y ESTADOS ESPECIALES                         -->
    <!-- ========================================================= -->
    <!--
        Aquí definimos capas visuales especiales que se muestran
        POR ENCIMA de toda la interfaz normal cuando ocurre algo
        importante a nivel de estado global de la app:

        - loading-overlay  → Pantalla de "cargando" o procesos críticos.
        - offline-banner   → Aviso discreto pero visible de modo offline.
        - splash-screen    → Pantalla inicial tipo "portada" de la app.

        Estas capas NO se usan todo el tiempo:
        - se activan y desactivan desde JavaScript,
        - usando atributos como "hidden" y clases CSS específicas,
        - nunca reemplazan el contenido, solo lo cubren/acompañan.
    -->


    <!-- ========================================================= -->
    <!-- 6.1 OVERLAY DE CARGA GLOBAL (LOADING OVERLAY)            -->
    <!-- ========================================================= -->
    <div
        id="loading-overlay"
        class="overlay overlay-loading"
        hidden
    >
        <!--
            [ROL DEL LOADING OVERLAY]
            ----------------------------------------------------
            - Mostrar una pantalla semi-transparente sobre toda
              la app cuando ocurre:
                * Carga inicial crítica (primer arranque).
                * Sincronización pesada de datos.
                * Procesos intensivos que no quieres que se interrumpan.
            - Evita que el usuario haga clics mientras algo
              importante se está ejecutando.

            [COMPORTAMIENTO ESPERADO]
            ----------------------------------------------------
            - Por defecto, tiene el atributo "hidden" → NO se ve.
            - JavaScript puede:
                * quitar el atributo "hidden" para mostrarlo,
                * volver a colocarlo cuando el proceso termine.

            EJEMPLOS DE USO:
            ----------------------------------------------------
            - Durante el primer sync de blocks/products/sales
              desde el backend al instalar la app.
            - Durante un "full resync" manual.
            - Cuando se está calculando un análisis pesado.
        -->

        <!-- Contenedor interno centrado para el contenido del overlay -->
        <div class="overlay-content">
            <!-- Podrás reemplazar este texto por un spinner SVG, logo, etc. -->
            <div class="overlay-spinner">
                <!--
                    Aquí puedes personalizar más adelante:
                    - un icono animado,
                    - el logo de tu app,
                    - o un componente visual más complejo.
                -->
                <span class="overlay-spinner-icon">⏳</span>
            </div>

            <div class="overlay-text">
                <p class="overlay-title">Cargando datos del negocio...</p>
                <p class="overlay-subtitle">
                    Por favor espera unos segundos mientras sincronizamos tu información.
                </p>
            </div>
        </div>
    </div>


    <!-- ========================================================= -->
    <!-- 6.2 BANNER DE ESTADO OFFLINE                             -->
    <!-- ========================================================= -->
    <div
        id="offline-banner"
        class="banner banner-offline"
        hidden
    >
        <!--
            [ROL DEL OFFLINE BANNER]
            ----------------------------------------------------
            - Avisar al usuario que la app está trabajando SIN
              conexión a internet.
            - No bloquea el uso de la app (a diferencia del overlay).
            - Es ideal para:
                * recordar al usuario que está en modo offline,
                * evitar confusión cuando los cambios no se ven en el backend.

            [COMPORTAMIENTO ESPERADO]
            ----------------------------------------------------
            - Se muestra como una franja (arriba o abajo, según CSS)
              con un mensaje corto.
            - syncEngine.js detectará:
                * window.navigator.onLine
                * eventos 'online' / 'offline'
              y decidirá cuándo mostrar/ocultar este banner.
        -->

        <div class="banner-content">
            <span class="banner-icon">⚠️</span>
            <div class="banner-text">
                <p class="banner-title">Modo offline activado</p>
                <p class="banner-subtitle">
                    Tus acciones se guardarán localmente y se sincronizarán cuando vuelva la conexión.
                </p>
            </div>
        </div>

        <!-- Botón opcional para que el usuario intente reintentar sync manual -->
        <button
            id="offline-retry-sync-button"
            class="banner-action-button"
            type="button"
        >
            Reintentar sincronización
        </button>
    </div>


    <!-- ========================================================= -->
    <!-- 6.3 SPLASH SCREEN / PANTALLA DE BIENVENIDA                -->
    <!-- ========================================================= -->
    <div
        id="splash-screen"
        class="overlay overlay-splash"
        hidden
    >
        <!--
            [ROL DEL SPLASH SCREEN]
            ----------------------------------------------------
            - Mostrar una pantalla de bienvenida al abrir la app.
            - Útil para:
                * branding,
                * transición mientras se carga el estado inicial,
                * mostrar el nombre del negocio al arrancar,
                * hacer que la app se sienta más "nativa".

            [COMPORTAMIENTO ESPERADO]
            ----------------------------------------------------
            - Puede mostrarse al inicio:
                * mientras se lee el estado local,
                * mientras se valida sesión,
                * mientras se cargan configuraciones rápidas.
            - Una vez listo todo:
                * JavaScript oculta este splash y muestra el main.
        -->

        <div class="splash-content">
            <!-- Logo o nombre de la app -->
            <div class="splash-logo">
                <!-- Aquí puedes luego cambiar a un logotipo visual -->
                <span class="splash-logo-text">Finance PWA</span>
            </div>

            <!-- Nombre del negocio (cuando esté disponible) -->
            <div class="splash-business">
                <!--
                    Más adelante, ui_layout.js o index.js
                    pueden actualizar este texto con:
                        appState.business.name
                    para mostrar algo como:
                        "BurgerLand"
                        "Tacos Don Pepe"
                -->
                <span id="splash-business-name">Tu negocio de comida</span>
            </div>

            <!-- Mensaje breve / slogan -->
            <div class="splash-tagline">
                <p>Analiza tus costos, ventas y metas… sin dejar de cocinar.</p>
            </div>
        </div>
    </div>
